FROM node:15.12.0-alpine

ARG PGHOST
ARG PGDATABASE
ARG PGUSER
ARG PGPASSWORD
ARG PGPORT
ARG SECRET


ENV PGHOST $PGHOST
ENV PGDATABASE $PGDATABASE
ENV PGUSER $PGUSER
ENV PGPASSWORD $PGPASSWORD
ENV PGPORT $PGPORT
ENV SECRET $SECRET


RUN apk add --no-cache postgresql-client

WORKDIR /usr/src/dreamonmessenger
COPY ./ ./

RUN npm install

EXPOSE 8080
CMD ['npm', 'start']
